<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="algolia-site-verification" content="EEC3EBA57BFE40B9" />

        <title>FB AIO Extension</title>

        <link rel="icon" href="./assets/logo-BgUNo_GL.png" />

        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-0MQRTEC81L"></script>
        <script>
            window.dataLayer = window.dataLayer || [];

            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());

            gtag('config', 'G-0MQRTEC81L');
        </script>

        <!-- Google adsense -->
        <!-- <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3880569561595847"
            crossorigin="anonymous"
        ></script> -->

        <!-- Datafast -->
        <!-- <script
            defer
            data-website-id="687a236d403a53da966232c8"
            data-domain="fb-aio.github.io"
            src="https://datafa.st/js/script.js"
        ></script> -->

        <style>
            ._init_loading {
                display: flex;
                justify-content: center;
                align-items: center;
                height: 100vh;
                width: 100vw;
                margin: 0;
                padding: 0;
                color: #999;
            }
            /* Non-destructive hide to avoid interfering with framework's VDOM */
            .fbaio-hide { display: none !important; }
            /* Hide the legacy extension-required banner if present */
            .fbaio-ext-required { display: none !important; }
        </style>
        <script>
            // Hide VIP/Checkout UI and redirect their routes to home
            (function () {
                function guardRoute() {
                    if (/^#\/(vip|checkout)/i.test(location.hash)) {
                        location.hash = '#/';
                    }
                }
                function hideVIPUI(root) {
                    const container = root || document;
                    // Hide links to /vip or /checkout
                    container.querySelectorAll('a[href*="/vip"], a[href*="/checkout"]').forEach(el => {
                        const item = el.closest('li, .menu-item, .ant-menu-item, .ant-list-item, .ant-card, .ant-col, .ant-row') || el;
                        item.classList?.add('fbaio-hide');
                        item.setAttribute?.('aria-hidden','true');
                        item.setAttribute?.('data-fbaio','hidden');
                    });
                    // Hide buttons or spans containing VIP/Checkout text
                    const matchText = (el) => /\b(vip|checkout)\b/i.test(el.textContent || '');
                    container.querySelectorAll('button, span, div').forEach(el => {
                        if (matchText(el) && !el.closest('#root ._init_loading')) {
                            const item = el.closest('li, .menu-item, .ant-menu-item, .ant-list-item, .ant-card, .ant-col, .ant-row') || el;
                            item.classList?.add('fbaio-hide');
                            item.setAttribute?.('aria-hidden','true');
                            item.setAttribute?.('data-fbaio','hidden');
                        }
                    });
                }
                // Initial
                guardRoute();
                hideVIPUI();
                window.addEventListener('hashchange', guardRoute);
                // Observe dynamic UI
                const mo = new MutationObserver((muts) => {
                    for (const m of muts) {
                        m.addedNodes && m.addedNodes.forEach(n => {
                            if (n.nodeType === 1) hideVIPUI(n);
                        });
                    }
                });
                mo.observe(document.documentElement, { childList: true, subtree: true });
            })();
        </script>
        <script>
            // Redirect any chrome.runtime messaging targeting the old extension ID to the new one
            (function(){
                const OLD_ID = 'ncncagnhhigemlgiflfgdhcdpipadmmm';
                const NEW_ID = 'ekkpkjmmohjeokgndlanlnpnifaenlpd';
                if (window.chrome && chrome.runtime) {
                    try {
                        const origSend = chrome.runtime.sendMessage?.bind(chrome.runtime);
                        if (origSend) {
                            chrome.runtime.sendMessage = function(targetOrMessage, ...rest) {
                                try {
                                    if (typeof targetOrMessage === 'string' && targetOrMessage === OLD_ID) {
                                        const [message, responseCallback] = rest;
                                        return origSend(NEW_ID, message, responseCallback);
                                    }
                                } catch (e) {}
                                return origSend(targetOrMessage, ...rest);
                            };
                        }
                        const origConnect = chrome.runtime.connect?.bind(chrome.runtime);
                        if (origConnect) {
                            chrome.runtime.connect = function(targetExtensionId, connectInfo) {
                                try {
                                    if (targetExtensionId === OLD_ID) {
                                        return origConnect(NEW_ID, connectInfo);
                                    }
                                } catch (e) {}
                                return origConnect(targetExtensionId, connectInfo);
                            };
                        }
                    } catch (e) {}
                }
            })();
        </script>
        <script>
            // Remove "Coming soon" badges and enable AutoRun toggles
            (function(){
                function stripComingSoon(root){
                    const c = root || document;
                    // Hide tags/badges with text 'Coming soon'
                    c.querySelectorAll('span, div, i').forEach(el => {
                        const txt = (el.textContent || '').trim();
                        if (/^coming\s+soon$/i.test(txt)){
                            el.style.display = 'none';
                            el.classList?.add('fbaio-hide');
                            el.setAttribute?.('aria-hidden','true');
                        }
                    });
                    // Enable checkboxes/toggles that might be disabled
                    c.querySelectorAll('input[type="checkbox"][disabled], button[disabled]').forEach(el => {
                        el.removeAttribute('disabled');
                        el.classList?.remove('disabled');
                        el.setAttribute?.('aria-disabled','false');
                    });
                }
                // Initial
                stripComingSoon();
                // Observe dynamic changes
                const mo = new MutationObserver((muts) => {
                    for (const m of muts){
                        if (m.addedNodes) m.addedNodes.forEach(n => { if (n.nodeType === 1) stripComingSoon(n); });
                    }
                });
                mo.observe(document.documentElement, { childList: true, subtree: true });
            })();
        </script>
        <script>
            // Handle legacy "This feature requires FB AIO extension" banner
            (function(){
                const NEW_EXT_URL = 'https://tika1996.github.io/facebook.tika.aio/'; // fallback info page
                const OLD_EXT_ID = 'ncncagnhhigemlgiflfgdhcdpipadmmm';
                const CWS_HOST = 'chromewebstore.google.com';
                function fixBanner(root){
                    const c = root || document;
                    // Find banners by text
                    c.querySelectorAll('div,section,article').forEach(el => {
                        const txt = (el.textContent || '').trim();
                        if (/this feature requires\s*fb aio extension/i.test(txt)){
                            // Try to retarget the CTA button
                            const btn = el.querySelector('a,button');
                            if (btn && btn.tagName === 'A'){
                                try { btn.href = NEW_EXT_URL; btn.target = '_blank'; } catch(e){}
                            }
                            // Also hide the legacy banner if desired
                            el.classList.add('fbaio-ext-required');
                            el.setAttribute('aria-hidden','true');
                        }
                    });
                    // Rewrite any anchors pointing to Chrome Web Store / old extension ID
                    c.querySelectorAll('a[href]').forEach(a => {
                        try {
                            const url = new URL(a.href, location.href);
                            if (url.host.includes(CWS_HOST) || url.href.includes(OLD_EXT_ID)){
                                a.href = NEW_EXT_URL;
                                a.target = '_blank';
                                a.rel = 'noopener noreferrer';
                            }
                        } catch(e){}
                        // Retarget any button-like anchor with label 'Install now'
                        const label = (a.textContent || '').trim();
                        if (/^install now$/i.test(label)){
                            a.href = NEW_EXT_URL;
                            a.target = '_blank';
                            a.rel = 'noopener noreferrer';
                        }
                    });
                }
                // Initial
                fixBanner();
                // Observe
                const mo2 = new MutationObserver((muts) => {
                    for (const m of muts) {
                        m.addedNodes && m.addedNodes.forEach(n => { if (n.nodeType === 1) fixBanner(n); });
                    }
                });
                mo2.observe(document.documentElement, { childList: true, subtree: true });
            })();
        </script>
      <script type="module" crossorigin src="./assets/index-DZEcYG8Q.js"></script>
      <link rel="stylesheet" crossorigin href="./assets/index-C6k8ZUm0.css">
    </head>

    <body style="margin: 0; padding: 0">
        <!--[if IE]>
            <p class="browserupgrade">
                You are using an <strong>outdated</strong> browser. Please
                <a href="https://browsehappy.com/">upgrade your browser</a> to improve your
                experience and security.
            </p>
        <![endif]-->

        <div id="root" style="margin: 0; padding: 0">
            <div class="_init_loading">
                <h1>🚀 Getting ready...</h1>
            </div>
        </div>
    </body>
</html>
