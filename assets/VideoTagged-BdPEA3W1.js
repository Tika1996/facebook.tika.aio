const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VideoViewer-C2qoCs6p.js","./index-DZEcYG8Q.js","./index-C6k8ZUm0.css","./videos-DtjqJObU.js","./___vite-browser-external_commonjs-proxy-D5wFEbJ4.js","./MyApp-DRRa55Bd.js","./useVIP-CGpIDALh.js","./sweetalert2.esm.all-BZxvatOx.js","./getIds-BE6G2xp0.js","./index-B87p3I4c.js","./Input-LTpJ6AuY.js","./EyeOutlined-BBPXKIU8.js","./SearchOutlined-Bh66KhXc.js","./index-CiDxWY8X.js","./Dropdown-BgvXKd3u.js"])))=>i.map(i=>d[i]);
import{r as e,b1 as i,b5 as n,b2 as t,aY as o}from"./index-DZEcYG8Q.js";import{u as d,d as r,t as l,S as a,i as s,h as m,g as u,aW as v,l as c,e as p,f as j,T as g,o as h,b as f,I as x}from"./MyApp-DRRa55Bd.js";import{a as y}from"./tagged-LfcMiiN8.js";import w from"./useCacheState-D4ghBCVU.js";import k from"./MyTable-D1FbPMwN.js";import b from"./ExportButton-CPuYvz9B.js";import{I}from"./index-BE0FsmaM.js";import"./index-BA5m7QhG.js";import"./index-DOt91uSA.js";import"./DownOutlined-BrkIPj-I.js";import"./Table-DDck-vB7.js";import"./addEventListener-C9VBchln.js";import"./List-BPJoeCz4.js";import"./index-BRk8JeT5.js";import"./index-CEGXIRel.js";import"./index-BQAhaSn9.js";import"./index-KPoWFIyW.js";import"./dropdown-BoVCRztz.js";import"./Dropdown-BgvXKd3u.js";import"./PurePanel-Beni9Vkb.js";import"./move-Bzyc79vL.js";import"./index-D9U4WvIE.js";import"./index-CvALG2oX.js";import"./SearchOutlined-Bh66KhXc.js";import"./useBreakpoint-HjQEkdEA.js";import"./Pagination-Dv2YSLQ3.js";import"./Input-LTpJ6AuY.js";import"./row-BgRGnxnv.js";import"./index-B87p3I4c.js";import"./EyeOutlined-BBPXKIU8.js";import"./useVIP-CGpIDALh.js";import"./sweetalert2.esm.all-BZxvatOx.js";import"./getIds-BE6G2xp0.js";import"./index-CiDxWY8X.js";const V=t((()=>o((()=>import("./VideoViewer-C2qoCs6p.js")),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),{fallback:x});function _({target:t}){const{ti:x}=d(),{message:_}=r(),[T,N]=w("VideoTagged."+(null==t?void 0:t.id),[]),[L,P]=w("VideoTagged.loading."+(null==t?void 0:t.id),!1),[C,E]=w("VideoTagged.loadMore."+(null==t?void 0:t.id),!1),[O,R]=e.useState(!0);e.useEffect((()=>{S()}),[null==t?void 0:t.id]);const D=e.useRef(null==t?void 0:t.id),S=(e=!1)=>{if(!(null==t?void 0:t.id)||L)return;const i=D.current!==(null==t?void 0:t.id);(e||!T.length||i)&&(D.current=null==t?void 0:t.id,l("VideoTagged:onClickReload"),P(!0),y(t.id).then((e=>{(null==e?void 0:e.length)?(console.log(e),N(e),R(!0)):(_.info(x({en:"No data: Video Tagged",vi:"Không có dữ liệu: Lượt tag video"})),R(!1))})).finally((()=>{P(!1)})))},A=i.jsx(n,{icon:i.jsx("i",{className:"fa-solid fa-play"}),loading:C,disabled:!O||L,onClick:async()=>{var e;if(!(null==t?void 0:t.id)||C)return;const{checkVIP:i}=await o((async()=>{const{checkVIP:e}=await import("./useVIP-CGpIDALh.js");return{checkVIP:e}}),__vite__mapDeps([6,1,2,5,7,8,9,10,11,12,13,14]),import.meta.url);await i()&&(l("Tagged:onClickLoadMore"),E(!0),y(t.id,null==(e=T[T.length-1])?void 0:e.cursor).then((e=>{const i=new Set(T.map((e=>e.id))),n=e.filter((e=>!i.has(e.id)));n.length?(N((e=>[...e,...n])),R(!0)):(_.info(x({en:"No more data",vi:"Không còn dữ liệu"})),R(!1))})).finally((()=>E(!1))))},children:x(O?{en:"Load more",vi:"Tải thêm"}:{en:"No more data",vi:"Không còn dữ liệu"})}),M=[{title:"#",key:"index",dataIndex:"index"},{title:x({en:"Owner",vi:"Người tag"}),key:"from",dataIndex:"from",render:(e,n,t)=>{var o,d,r,l,u;return(null==(o=null==n?void 0:n.from)?void 0:o.id)?i.jsxs(a,{children:[i.jsx(I,{src:s(null==(d=null==n?void 0:n.from)?void 0:d.id),style:{width:45,height:45,borderRadius:5}}),i.jsxs(a,{direction:"vertical",size:0,children:[i.jsx("a",{href:m(null==(r=null==n?void 0:n.from)?void 0:r.id),target:"_blank",rel:"noreferrer",children:i.jsx("b",{children:null==(l=null==n?void 0:n.from)?void 0:l.name})}),i.jsx("span",{style:{opacity:.5},children:null==(u=null==n?void 0:n.from)?void 0:u.id})]})]}):x({en:"Anonymous",vi:"Ẩn danh"})},filters:Array.from(new Set(null==T?void 0:T.map((e=>{var i;return null==(i=e.from)?void 0:i.id})))).map((e=>{var i,n;const t=T.filter((i=>{var n;return(null==(n=i.from)?void 0:n.id)===e}));return{value:e||"",text:((null==(n=null==(i=null==t?void 0:t[0])?void 0:i.from)?void 0:n.name)||x({en:"Anonymous",vi:"Ẩn danh"}))+` (${null==t?void 0:t.length})`,count:null==t?void 0:t.length}})).sort(((e,i)=>i.count-e.count)),onFilter:(e,i)=>{var n;return(null==(n=i.from)?void 0:n.id)==e},width:250},{title:x({en:"Video",vi:"Video"}),key:"video",dataIndex:"video",render:(e,n,t)=>i.jsx(I,{src:null==n?void 0:n.picture,style:{width:200,height:150,objectFit:"contain"},preview:{destroyOnHidden:!0,toolbarRender:()=>null,imageRender:()=>i.jsx(V,{forceGetVideoInfo:!0,info:{id:null==n?void 0:n.id,source:null==n?void 0:n.source}})}})},{title:x({en:"Views",vi:"Lượt xem"}),key:"views",dataIndex:"views",render:(e,n,t)=>i.jsx("span",{children:u(null==n?void 0:n.views)}),sorter:(e,i)=>e.views-i.views,width:100},{title:x({en:"Length",vi:"Độ dài"}),key:"length",dataIndex:"length",render:(e,n,t)=>i.jsx("span",{children:v(null==n?void 0:n.length)}),sorter:(e,i)=>e.length-i.length,width:100},{title:x({en:"Content",vi:"Nội dung"}),key:"message",dataIndex:"message",render:(e,n,o)=>{var d;return i.jsx("div",{style:{wordBreak:"break-word",maxWidth:400},children:(null==(d=c(null==n?void 0:n.description,200))?void 0:d.replace(null==t?void 0:t.name,""))||(null==t?void 0:t.name)})}},{title:x({en:"Created at",vi:"Thời gian"}),key:"created_time",dataIndex:"created_time",render:(e,n,t)=>i.jsxs("span",{children:[p(new Date(e).getTime())," - ",j(new Date(e))]})},{title:x({en:"Action",vi:"Hành động"}),key:"action",dataIndex:"action",render:(e,t,o)=>i.jsx(g,{title:x({en:"View post",vi:"Xem bài viết"}),children:i.jsx(n,{target:"_blank",href:m((null==t?void 0:t.permalink_url)||(null==t?void 0:t.id)),icon:i.jsx("i",{className:"fa-solid fa-external-link"})})}),width:100}];return i.jsx(k,{data:T.map(((e,i)=>({...e,index:i+1}))),columns:M,searchable:!0,keyExtractor:e=>e.id,size:"small",renderTitle:()=>i.jsxs(i.Fragment,{children:[i.jsxs(a.Compact,{children:[i.jsx(n,{type:"primary",icon:i.jsx("i",{className:"fa-solid fa-rotate-right"}),loading:L,disabled:C,onClick:()=>S(!0),children:x({en:"Reload",vi:"Tải lại"})}),A]}),i.jsx(b,{data:T,options:[{key:"json",label:".json",prepareData:e=>({fileName:(null==t?void 0:t.name)+"_tagged_video.json",data:JSON.stringify(e,null,4)})},{key:"csv",label:".csv",prepareData:e=>({fileName:(null==t?void 0:t.name)+"_tagged_video.csv",data:h(e.map((e=>{var i,n;return{...e,from:null==(i=e.from)?void 0:i.id,fromName:null==(n=e.from)?void 0:n.name}})))})}]}),i.jsx(f,{color:"red",children:(null==T?void 0:T.length)+" "+x({en:"Tagged Video",vi:"Lượt tag video"})})]}),footer:i.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:A})})}export{_ as default};
