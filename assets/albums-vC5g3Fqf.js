import{aX as o}from"./index-DZEcYG8Q.js";import{aD as l,aE as n,aF as i,x as e,y as d,aA as u}from"./MyApp-DRRa55Bd.js";async function a({uid:o="",cursor:l=""}){var n,i,a,r,t,s,c,v,m,p;const _=[],f=await u(o,"photos_albums"),b=await d({fb_api_req_friendly_name:"ProfileCometAppCollectionAlbumsRendererPaginationQuery",variables:{cursor:l,count:8,scale:2,id:f},doc_id:"8672545689426653"}),g=e(b),{edges:y=[],page_info:h={}}=(null==(i=null==(n=null==g?void 0:g.data)?void 0:n.node)?void 0:i.pageItems)||{};for(const e of y){const o=atob(null==(a=null==e?void 0:e.node)?void 0:a.id).split(":").pop()||"";_.push({id:o,type:"album",name:null==(t=null==(r=null==e?void 0:e.node)?void 0:r.title)?void 0:t.text,count:parseInt(null==(c=null==(s=null==e?void 0:e.node)?void 0:s.subtitle_text)?void 0:c.text)||0,link:null==(v=null==e?void 0:e.node)?void 0:v.url,picture:null==(p=null==(m=null==e?void 0:e.node)?void 0:m.image)?void 0:p.uri,cursor:null==e?void 0:e.cursor,recent:_.length})}return{albums:_,nextCursor:null==h?void 0:h.end_cursor}}async function r({groupId:o="",cursor:l=""}){var n,i,u,a,r,t,s,c,v,m,p,_,f,b;const g=[],y=await d({fb_api_req_friendly_name:"GroupsCometMediaAlbumsTabGridQuery",variables:{cursor:l,count:8,scale:2,id:o},doc_id:"6894403247286675"}),h=e(y),{edges:x=[],page_info:w={}}=(null==(i=null==(n=null==h?void 0:h.data)?void 0:n.node)?void 0:i.group_albums)||{};for(const e of x){const o=null==(u=null==e?void 0:e.node)?void 0:u.id;g.push({id:o,type:"album",name:null==(r=null==(a=null==e?void 0:e.node)?void 0:a.title)?void 0:r.text,count:((null==(s=null==(t=null==e?void 0:e.node)?void 0:t.photos)?void 0:s.count)||0)+((null==(v=null==(c=null==e?void 0:e.node)?void 0:c.video)?void 0:v.count)||0),link:null==(m=null==e?void 0:e.node)?void 0:m.url,picture:null==(b=null==(f=null==(_=null==(p=null==e?void 0:e.node)?void 0:p.album_cover_focused_image)?void 0:_.image)?void 0:f.image)?void 0:b.uri,cursor:null==e?void 0:e.cursor,recent:g.length})}return{albums:g,nextCursor:null==w?void 0:w.end_cursor}}async function t(d=""){var u,a;const r=await l(n.FBAndroid),t=await o(`https://graph.facebook.com/v14.0/${d}?fields=albums{${["count","created_time","name","updated_time","type","link","picture{url}"].join(",")}}&access_token=${r}`);i(t);const s=e(t),c=null==(a=null==(u=null==s?void 0:s.albums)?void 0:u.data)?void 0:a.filter((o=>["wall","mobile","profile"].includes(o.type)));return c&&c.forEach((o=>{var l,n;o.picture=null==(n=null==(l=o.picture)?void 0:l.data)?void 0:n.url})),c}var s=(o=>(o.IMAGE="image",o.VIDEO="video",o))(s||{});async function c({albumId:o,fromId:l=""}){let n,i;n=await d({doc_id:"8142948395762884",variables:{id:o,cursor:l?btoa("fbid:"+l):"",count:14,renderLocation:"permalink",scale:2}}),i=e(n);try{return i.data.node.media.edges.map((o=>({id:o.node.id,uri:o.node.image.uri,type:"Video"===o.node.__typename?"video":"image"})))}catch(u){return console.error(u),[]}}export{s as MediaType,c as getAlbumPhoto,r as getGroupAlbum,t as getHiddenAlbums,a as getUserAlbum};
