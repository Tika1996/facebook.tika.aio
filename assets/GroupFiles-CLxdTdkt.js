import{r as o,b1 as i}from"./index-DZEcYG8Q.js";import n from"./Collection-DTYRwOd8.js";import{y as e,x as l,u as r,S as t,T as d,B as s,c as a,s as u}from"./MyApp-DRRa55Bd.js";import{L as m}from"./index-CG5dclLJ.js";import{I as p}from"./index-BE0FsmaM.js";import"./index-BA5m7QhG.js";import"./useCacheState-D4ghBCVU.js";import"./react-hotkeys-hook.esm-D8zm19cE.js";import"./index-C0Edlh-n.js";import"./index-BQAhaSn9.js";import"./index-CEGXIRel.js";import"./index-KPoWFIyW.js";import"./dropdown-BoVCRztz.js";import"./Dropdown-BgvXKd3u.js";import"./PurePanel-Beni9Vkb.js";import"./move-Bzyc79vL.js";import"./index-B87p3I4c.js";import"./Input-LTpJ6AuY.js";import"./EyeOutlined-BBPXKIU8.js";import"./SearchOutlined-Bh66KhXc.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./index-DHhmxYJT.js";import"./index-D9U4WvIE.js";import"./List-BPJoeCz4.js";import"./index-CvALG2oX.js";import"./DownOutlined-BrkIPj-I.js";import"./Pagination-Dv2YSLQ3.js";import"./col-DLTiGXF3.js";import"./addEventListener-C9VBchln.js";function c({target:c}){const{ti:v}=r(),j=o.useCallback((async(o=[],i)=>{if(!(null==c?void 0:c.id)||!(null==c?void 0:c.type))return;const n=null==o?void 0:o[(null==o?void 0:o.length)-1];return await async function({groupId:o="",cursor:i=""}){var n,r;const t=await e({fb_api_req_friendly_name:"GroupsCometFilesTabPaginationQuery",variables:{count:15,cursor:i,groupDocsFileName:null,groupID:o,orderby:"TIME_DESC",scale:1,id:o},doc_id:"24326962373618252"}),d=l(t),{edges:s=[],page_info:a={}}=(null==(r=null==(n=null==d?void 0:d.data)?void 0:n.node)?void 0:r.group_docs_and_files)||{};return s.map((o=>{var i,n,e,l,r,t,d,s,u,m,p;return{download_url:null==(i=null==o?void 0:o.node)?void 0:i.download_url,name:null==(n=null==o?void 0:o.node)?void 0:n.name,post_url:null==(l=null==(e=null==o?void 0:o.node)?void 0:e.original_post)?void 0:l.url,creation_time:null==(t=null==(r=null==o?void 0:o.node)?void 0:r.original_post)?void 0:t.creation_time,icon:null==(s=null==(d=null==o?void 0:o.node)?void 0:d.icon)?void 0:s.uri,file_type:null==(u=null==o?void 0:o.node)?void 0:u.file_type,owners:null==(p=null==(m=null==o?void 0:o.node)?void 0:m.original_post)?void 0:p.actors.map((o=>({id:null==o?void 0:o.id,name:null==o?void 0:o.name,url:null==o?void 0:o.url}))),cursor:null==a?void 0:a.end_cursor}}))}({groupId:null==c?void 0:c.id,cursor:i||(null==n?void 0:n.cursor)||""})}),[c]),x=o.useCallback((o=>i.jsx(m.Item,{children:i.jsxs(t,{direction:"vertical",align:"center",style:{minWidth:150},children:[i.jsx(d,{title:o.download_url?v({en:"Download",vi:"Tải xuống"}):v({en:"No download link",vi:"Không có link tải"}),children:i.jsx(t,{style:{padding:"10px"},children:i.jsx(s.Ribbon,{text:i.jsx("i",{className:"fa fa-times"}),color:"red",style:{display:o.download_url?"none":"block"},children:i.jsx(p,{src:o.icon,alt:o.name,width:70,height:70,style:{objectFit:"cover",borderRadius:"10px",cursor:"pointer"},preview:!1,onClick:()=>o.download_url&&window.open(o.download_url)})})})}),i.jsx(d,{title:v({en:"View post",vi:"Xem bài viết"}),placement:"bottom",children:i.jsx(a.Paragraph,{style:{maxWidth:"150px",wordWrap:"break-word"},onClick:()=>window.open(o.post_url),children:o.name})})]})})),[]),_=o.useCallback((async o=>({url:o.download_url,name:o.name})),[]);return i.jsx(n,{collectionName:(null==c?void 0:c.name)+" - Files",fetchNext:j,renderItem:x,downloadItem:_,getItemCursor:o=>o.cursor||"",rowKey:o=>o.name+o.creation_time,onSearch:(o,i)=>u(o,i.name)})}export{c as default};
