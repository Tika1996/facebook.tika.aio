const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ImageLazyPreview-Bx8MRCEH.js","./index-DZEcYG8Q.js","./index-C6k8ZUm0.css","./useCacheState-D4ghBCVU.js","./MyApp-DRRa55Bd.js","./index-BE0FsmaM.js","./EyeOutlined-BBPXKIU8.js","./addEventListener-C9VBchln.js"])))=>i.map(i=>d[i]);
import{r as i,b1 as t,b2 as o,b5 as e,aY as s}from"./index-DZEcYG8Q.js";import r from"./Collection-DTYRwOd8.js";import{u as a,d as n,z as l,h as m}from"./MyApp-DRRa55Bd.js";import{PhotoCollectionType as d,getGroupPhotos as p,getUserPhotos as u,PhotoCollectionTypeLang as c,getLargestPhoto as j}from"./photos-O1XM4ehS.js";import{S as h}from"./index-D9U4WvIE.js";import{L as g}from"./index-CG5dclLJ.js";import"./index-BA5m7QhG.js";import"./useCacheState-D4ghBCVU.js";import"./react-hotkeys-hook.esm-D8zm19cE.js";import"./index-C0Edlh-n.js";import"./index-BQAhaSn9.js";import"./index-CEGXIRel.js";import"./index-KPoWFIyW.js";import"./dropdown-BoVCRztz.js";import"./Dropdown-BgvXKd3u.js";import"./PurePanel-Beni9Vkb.js";import"./move-Bzyc79vL.js";import"./index-B87p3I4c.js";import"./Input-LTpJ6AuY.js";import"./EyeOutlined-BBPXKIU8.js";import"./SearchOutlined-Bh66KhXc.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./index-DHhmxYJT.js";import"./List-BPJoeCz4.js";import"./index-CvALG2oX.js";import"./DownOutlined-BrkIPj-I.js";import"./Pagination-Dv2YSLQ3.js";import"./col-DLTiGXF3.js";const v=o((()=>s((()=>import("./ImageLazyPreview-Bx8MRCEH.js")),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)));function x({target:o}){const{ti:s}=a(),{message:x}=n(),[b,f]=i.useState(d.OWNER);i.useEffect((()=>{(null==o?void 0:o.id)&&f(d.OWNER)}),[null==o?void 0:o.id]);const y=i.useCallback((async(i,t)=>{var e,s;if((null==o?void 0:o.id)&&(null==o?void 0:o.type)){if(o.type===l.Group){const s=t||(null==(e=null==i?void 0:i[(null==i?void 0:i.length)-1])?void 0:e.cursor)||"";return await p({id:o.id,cursor:s})}{const e=null==i?void 0:i.filter((i=>i.photo_type===b)),r=t||(null==(s=null==e?void 0:e[(null==e?void 0:e.length)-1])?void 0:s.cursor)||"";return await u({id:o.id,cursor:r,type:b})}}}),[o,b]),w=i.useCallback(((i,e)=>(null==o?void 0:o.type)!==l.Group&&t.jsx(h,{disabled:e,value:b,onChange:f,popupMatchSelectWidth:!1,options:Object.entries(c).map((([i,t])=>({label:s(t),value:i})))})),[b,s]),C=i.useCallback((i=>t.jsxs(g.Item,{className:"show-on-hover-trigger",children:[t.jsx(v,{src:i.thumbnail,alt:i.accessibility_caption,width:150,height:150,style:{objectFit:"cover",borderRadius:"10px"},cacheId:"photos."+i.id,getPreview:()=>i.image||j(i.id).then((i=>i.image))}),t.jsx(e,{type:"default",icon:t.jsx("i",{className:"fa-solid fa-up-right-from-square"}),style:{position:"absolute",bottom:10,right:10},className:"show-on-hover-item",target:"_blank",href:m(i.id)})]},i.id)),[]),k=i.useCallback((async(i,t)=>{if(!i.image&&(null==o?void 0:o.type)===l.Group){const t=await j(i.id);t.image||x.error(s({en:"Cannot get largest photo",vi:"Lỗi lấy ảnh chất lượng cao"})),i.image=t.image||t.thumbnail||i.thumbnail}return{url:i.image,name:i.id+".jpg"}}),[null==o?void 0:o.id]);return t.jsx(r,{collectionName:(null==o?void 0:o.name)+" - Photos - "+s(c[b]),fetchNext:y,renderItem:C,downloadItem:k,headerButtons:w,getItemCursor:i=>i.cursor||"",rowKey:i=>i.id})}export{x as default};
