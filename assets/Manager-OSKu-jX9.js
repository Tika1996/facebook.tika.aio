const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ZaloTools-D569MV6q.js","./index-DZEcYG8Q.js","./index-C6k8ZUm0.css","./MyApp-DRRa55Bd.js","./useCacheState-D4ghBCVU.js","./window-B1U4aOAC.js","./index-B2BHea4N.js","./index-CiDxWY8X.js","./Dropdown-BgvXKd3u.js","./index-l5dW_dFo.js","./index-iP3EwXx5.js","./PurePanel-Beni9Vkb.js","./index-BE0FsmaM.js","./EyeOutlined-BBPXKIU8.js","./addEventListener-C9VBchln.js","./ZaloFriends-CCwun00Y.js","./MyTable-D1FbPMwN.js","./index-BA5m7QhG.js","./index-DOt91uSA.js","./DownOutlined-BrkIPj-I.js","./Table-DDck-vB7.js","./List-BPJoeCz4.js","./index-BRk8JeT5.js","./index-CEGXIRel.js","./index-BQAhaSn9.js","./index-KPoWFIyW.js","./dropdown-BoVCRztz.js","./move-Bzyc79vL.js","./index-D9U4WvIE.js","./index-CvALG2oX.js","./SearchOutlined-Bh66KhXc.js","./useBreakpoint-HjQEkdEA.js","./Pagination-Dv2YSLQ3.js","./Input-LTpJ6AuY.js","./row-BgRGnxnv.js","./index-B87p3I4c.js","./ExportButton-CPuYvz9B.js","./useVIP-CGpIDALh.js","./sweetalert2.esm.all-BZxvatOx.js","./getIds-BE6G2xp0.js","./ZaloChats-D8FQ7ncq.js"])))=>i.map(i=>d[i]);
import{b1 as n,b5 as e,b2 as o,aY as t}from"./index-DZEcYG8Q.js";import{S as a}from"./Screen-1_H4V3tg.js";import s from"./useCacheState-D4ghBCVU.js";import{u as i,d as l,A as r,b as c,v as d,C as m}from"./MyApp-DRRa55Bd.js";import{waitWinForReady as u,runFnInWin as f}from"./window-B1U4aOAC.js";import{T as g}from"./index-CiDxWY8X.js";import"./col-DLTiGXF3.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./Dropdown-BgvXKd3u.js";const h=o((()=>t((()=>import("./ZaloTools-D569MV6q.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)),{fallback:m}),p=o((()=>t((()=>import("./ZaloFriends-CCwun00Y.js")),__vite__mapDeps([15,1,2,16,3,17,18,19,20,14,21,22,23,24,25,26,8,11,27,28,29,30,31,32,33,34,35,13,36,37,38,39,7,12]),import.meta.url)),{fallback:m}),y=o((()=>t((()=>import("./ZaloChats-D8FQ7ncq.js")),__vite__mapDeps([40,1,2,16,3,17,18,19,20,14,21,22,23,24,25,26,8,11,27,28,29,30,31,32,33,34,35,13]),import.meta.url)),{fallback:m});function v(n){if(n.dob){const e=new Date(1e3*n.dob);return{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}}if(n.sdob){const[e,o]=n.sdob.split("/");return{day:parseInt(e),month:parseInt(o)}}return null}function j(n){return n.map(((n,e)=>({...n,index:e+1,birthday:v(n)})))}function b(){const{ti:o}=i(),{message:t}=l(),[m,v]=s("zalo.activeTab","tools"),[b,w]=s("zalo.win",null),[x,C]=s("zalo.friends",[]),[k,z]=s("zalo.conversations",[]);return n.jsx(a,{title:o({en:"Zalo Manager",vi:"Quản lý Zalo"}),mode:"center",children:n.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10,alignItems:"center",justifyContent:"center",maxWidth:"100%"},children:[!b&&n.jsx(r,{showIcon:!0,message:o({en:"Open Zalo to start manager tools",vi:"Bấm mở Zalo để bắt đầu các chức năng quản lý"}),type:"info"}),b?n.jsx(e,{danger:!0,icon:n.jsx("i",{className:"fa-solid fa-xmark"}),onClick:()=>{b&&b.close(),w(null)},children:o({en:"Close Zalo",vi:"Đóng Zalo"})}):n.jsx(e,{icon:n.jsx("i",{className:"fa-solid fa-arrow-up-right-from-square"}),iconPosition:"end",onClick:async()=>{const n="ZaloManager.openZalo";t.loading({key:n,content:o({vi:"Đang mở Zalo...",en:"Opening Zalo..."}),duration:0});const e=window.open("https://chat.zalo.me/","_blank");w(e),await u(e),t.loading({key:n,content:o({vi:"Đang tải dữ liệu...",en:"Loading data..."}),duration:0}),await d(1e3);const a=await f({win:e,fnPath:"window.eval",params:['\n    (async () => {\n        const zGet= (module) => window.webpackJsonp.push([[Math.random()], {}, [[module]]])\n        const encodeAES= (content) => zGet("z0WU").default.encodeAES(content)\n        const decodeAES= (content) => zGet("z0WU").default.decodeAES(content)\n        const getConversations = () => zGet(\'XS0u\').default.getConversations()\n        const getMyFriends = () => zGet(\'UiPd\').default.getFriends()\n        const createToast = (content = "", delay = 10000) => zGet("6uTC").default.createMessage(content, delay)\n        const createNotify = ({ type = 2, title = "", description = "", duration = 999999} = {}) =>\n            zGet("6uTC").default.createMessageCustom({\n                type,\n                title,\n                description,\n                duration,\n                // buttons: {  // Có thể có hoặc không\n                //     primary: {\n                //         textKey: "OK",\n                //         onClick: () => {}   // Sự kiện nút bấm\n                //     }\n                // }\n            })\n\n        window.fbaio_zalo = {\n            zGet,\n            createToast,\n            createNotify,\n            getConversations,\n            getMyFriends,\n            encodeAES,\n            decodeAES\n        }\n\n        const conversations = await getConversations();\n        console.log(conversations);\n\n        const friends = await getMyFriends();\n        console.log(friends);\n        return {\n            friends,\n            conversations\n        };\n    })()\n    ']});console.log(a);const s=null==a?void 0:a.friends,i=null==a?void 0:a.conversations;s&&C(j(s)),i&&z(i),console.log(i),t.success({key:n,content:o({en:"Found "+s.length+" friends and "+i.length+" conversations",vi:"Tìm thấy "+s.length+" bạn bè và "+i.length+" cuộc trò chuyện"})})},children:o({en:"Open Zalo",vi:"Mở Zalo"})}),b&&n.jsx(g,{style:{maxWidth:"100%"},centered:!0,type:"card",activeKey:m,onChange:v,items:[{label:o({en:"Tools",vi:"Công cụ"}),icon:n.jsx("i",{className:"fa-solid fa-gear"}),key:"tools",children:n.jsx(h,{win:b})},{label:n.jsxs(n.Fragment,{children:[o({en:"Friends",vi:"Bạn bè"})," ",n.jsx(c,{children:x.length})]}),icon:n.jsx("i",{className:"fa-solid fa-users"}),key:"friends",children:n.jsx(p,{friends:x,onOpenChat:n=>{b&&(b.focus(),f({win:b,fnPath:"window.eval",params:[`\n                    fbaio_zalo.zGet("lCn6").a.openConversation("${n.userId}")\n                `]}))},onReload:()=>{b&&f({win:b,fnPath:"window.eval",params:["\n                    (() => fbaio_zalo.getMyFriends())()\n                "]}).then((n=>{console.log(n),Array.isArray(n)?(C(j(n)),t.success({content:o({en:"Reload friends completed",vi:"Tải lại bạn bè thành công"})+" "+(null==n?void 0:n.length)})):t.error({content:o({en:"Failed to reload friends. No data",vi:"Tải lại bạn bè thất bại. Không dữ liệu"})})}))}})},{label:n.jsxs(n.Fragment,{children:[o({en:"Conversations",vi:"Đoạn chat"})," ",n.jsx(c,{children:k.length})]}),icon:n.jsx("i",{className:"fa-solid fa-comments"}),key:"conversations",children:n.jsx(y,{chats:k})}]})]})})}export{b as default};
