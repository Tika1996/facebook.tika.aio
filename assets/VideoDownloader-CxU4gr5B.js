const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./VideoViewer-C2qoCs6p.js","./index-DZEcYG8Q.js","./index-C6k8ZUm0.css","./videos-DtjqJObU.js","./___vite-browser-external_commonjs-proxy-D5wFEbJ4.js","./MyApp-DRRa55Bd.js","./core-2eeuOmoz.js","./core-YnJh3SAb.js","./core-CwlU2eK1.js","./window-B1U4aOAC.js","./core-CPoV3K5D.js","./getIds-BE6G2xp0.js","./comments-Dt_w-TDU.js","./reactions-DA-LA4iH.js"])))=>i.map(i=>d[i]);
import{bl as e,r as t,aY as o,b1 as i,bk as r,b2 as n,b5 as a,bg as s,d5 as l,bn as c}from"./index-DZEcYG8Q.js";import{u as m,d,t as u,S as g,c as p,T as f,I as h}from"./MyApp-DRRa55Bd.js";import w from"./useCacheState-D4ghBCVU.js";import{S as _}from"./Screen-1_H4V3tg.js";import{I as v}from"./index-B87p3I4c.js";import"./col-DLTiGXF3.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./Input-LTpJ6AuY.js";import"./EyeOutlined-BBPXKIU8.js";import"./SearchOutlined-Bh66KhXc.js";const y=n((()=>o((()=>import("./VideoViewer-C2qoCs6p.js")),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),{fallback:h}),j={[r.Bilibili]:"https://www.facebook.com/groups/fbaio/posts/1576991539622195",[r.GGDrive]:"https://www.facebook.com/groups/fbaio/posts/1576580342996648",[r.Tiktok]:"https://www.facebook.com/groups/fbaio/posts/1571823256805690",[r.Facebook]:"https://www.facebook.com/groups/fbaio/posts/1499830124005004",[r.Douyin]:"https://www.facebook.com/groups/fbaio/posts/1585404348780914"};function I(){const{ti:r}=m(),{message:n}=d(),[h,I]=e(),[V,b]=w("videoDownloader.url",""),[k,D]=w("videoDownloader.videoInfo",null),[x,F]=t.useState(!1);t.useEffect((()=>{u("VideoDownloader:onLoad")}),[]),t.useEffect((()=>{const e=h.get("url");if(console.log("url ne",e,h),e){const t=setTimeout((()=>{b(e),E(e),h.delete("url"),I(h)}),200);return()=>clearTimeout(t)}}),[h]);const E=async(e=V)=>{var t;const i="VideoDownloader:onSearch";u(i),F(!0),n.loading({key:i,content:r({en:"Finding data...",vi:"Đang tìm dữ liệu..."}),duration:0});try{let a;if(e.includes("douyin.com")){const{extractRealDouyinUrl:t,getDouyinVideoDetail:i}=await o((async()=>{const{extractRealDouyinUrl:e,getDouyinVideoDetail:t}=await import("./core-2eeuOmoz.js");return{extractRealDouyinUrl:e,getDouyinVideoDetail:t}}),__vite__mapDeps([6,1,2]),import.meta.url),r=await t(e);r!=e&&b(r),a=await i(r)}else if(e.includes("tiktok.com")){const{getTiktokVideoFromURL:t}=await o((async()=>{const{getTiktokVideoFromURL:e}=await import("./core-YnJh3SAb.js");return{getTiktokVideoFromURL:e}}),__vite__mapDeps([7,1,2,5]),import.meta.url);a=await t(e)}else if(e.includes("drive.google.com")){const{checkFolderUrl:t}=await o((async()=>{const{checkFolderUrl:e}=await import("./core-CwlU2eK1.js");return{checkFolderUrl:e}}),__vite__mapDeps([8,1,2,5,9]),import.meta.url);if(!(await t(e,r)))throw new Error(r({en:"Folder not supported",vi:"Chưa hỗ trợ folder"}));const{getGoogleDriveVideoFromURL:i}=await o((async()=>{const{getGoogleDriveVideoFromURL:e}=await import("./core-CwlU2eK1.js");return{getGoogleDriveVideoFromURL:e}}),__vite__mapDeps([8,1,2,5,9]),import.meta.url);a=await i(e)}else if(e.includes("bilibili.tv")){const{getBilibiliVideoFromURL:t}=await o((async()=>{const{getBilibiliVideoFromURL:e}=await import("./core-CPoV3K5D.js");return{getBilibiliVideoFromURL:e}}),__vite__mapDeps([10,1,2]),import.meta.url);a=await t(e)}else{const{getVideoIdFromUrl:s,getCommentIdFromUrl:l}=await o((async()=>{const{getVideoIdFromUrl:e,getCommentIdFromUrl:t}=await import("./getIds-BE6G2xp0.js");return{getVideoIdFromUrl:e,getCommentIdFromUrl:t}}),__vite__mapDeps([11,1,2,5]),import.meta.url),c=l(e);if(c){const{getCommentInfoFromId:e,CommentAttachmentType:i}=await o((async()=>{const{getCommentInfoFromId:e,CommentAttachmentType:t}=await import("./comments-Dt_w-TDU.js");return{getCommentInfoFromId:e,CommentAttachmentType:t}}),__vite__mapDeps([12,5,1,2,3,4,13]),import.meta.url);n.success({content:r({en:"Found comment id: ",vi:"Tìm thấy ID comment: "})+c});const s=await e(c),l=null==(t=null==s?void 0:s.attachments)?void 0:t.find((e=>e.type===i.VIDEO));l&&(a=l.video)}if(!a){const t=await s(e);if(!t)throw F(!1),new Error(r({en:"Video not found",vi:"Không tìm thấy video"}));n.success({content:r({en:"Found video id: ",vi:"Tìm thấy ID video: "})+t}),n.loading({key:i,content:r({en:"Fetching video info...",vi:"Đang tải thông tin video..."}),duration:0});const{getVideoInfo:l}=await o((async()=>{const{getVideoInfo:e}=await import("./videos-DtjqJObU.js");return{getVideoInfo:e}}),__vite__mapDeps([3,4,1,2,5]),import.meta.url);a=await l(t)}}if(console.log(a),!a)throw F(!1),new Error(r({en:"Cannot fetch file info",vi:"Không tải được file"}));n.success({key:i,content:r({en:"Fetched file info",vi:"Tải thông tin file thành công"})}),D(a)}catch(a){n.error({key:i,content:r({en:"Error",vi:"Lỗi"})+": "+a.message})}finally{F(!1)}};return i.jsx(_,{mode:"center",title:r({en:"Video downloader",vi:"Tải Video"})+" 🎬",children:i.jsxs(g,{align:"center",direction:"vertical",style:{width:"100%"},children:[i.jsx(v.Search,{placeholder:r({en:"Enter video/reel URL",vi:"Nhập LINK video/reel"}),size:"large",style:{width:350,maxWidth:"90vw"},value:V,onChange:e=>{var t;return b(null==(t=e.target.value)?void 0:t.trim())},onSearch:()=>E(),enterButton:x?null:i.jsx("i",{className:"fa-solid fa-magnifying-glass"}),loading:x}),k?i.jsxs("div",{style:{position:"relative"},children:[i.jsx(y,{buttonTop:!0,info:k}),i.jsx(a,{type:"text",icon:i.jsx("i",{className:"fa-solid fa-xmark"}),onClick:()=>{b(""),D(null)},style:{position:"absolute",right:5,top:5,zIndex:2}})]}):i.jsx(s,{style:{maxWidth:"90vw"},defaultActiveKey:[0],items:[{label:r({en:"Supported URL formats ?",vi:"Các định dạng LINK được hỗ trợ ?"}),children:Object.entries(l).map((([e,t])=>i.jsxs("div",{children:[i.jsx("i",{className:c[e]})," ",i.jsx(p.Text,{strong:!0,children:j[e]?i.jsx(f,{title:r({en:"Tutorial",vi:"Hướng dẫn"}),children:i.jsxs(p.Link,{href:j[e],target:"_blank",children:[e," ",i.jsx("i",{className:"fa-solid fa-arrow-up-right-from-square"})]})}):e}),i.jsx("ul",{children:t.map((e=>i.jsx("li",{children:e},e)))})]},e)))}]})]})})}export{j as TutorialPostURLs,I as default};
