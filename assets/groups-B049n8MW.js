import{y as o,x as e,az as n,W as i,aA as l}from"./MyApp-DRRa55Bd.js";import"./index-DZEcYG8Q.js";var r=(o=>(o.MEMBER="groups_member",o.MUTUAL="groups_mutual",o.ADMIN="groups_admined",o))(r||{});const u={groups_member:{vi:"Tất cả nhóm công khai",en:"All public groups",needVIP:!0},groups_mutual:{vi:"Nhóm chung",en:"Mutual groups"},groups_admined:{vi:"Quản trị viên",en:"Admin"}};async function a({uid:r="",cursor:u,type:a="groups_member"}){r=r||await i();const d=await l(r,a),t=await o({fb_api_req_friendly_name:"ProfileCometAppCollectionGridRendererPaginationQuery",variables:{count:8,cursor:u??null,id:d},doc_id:"5244211935648733"}),s=e(t);console.log(s);const{edges:_=[],page_info:p={}}=n(s);return _.map((o=>{var e,n,i,l,r;return{id:(null==(e=o.node.node)?void 0:e.id)||atob(o.node.id).split(":").at(-1),name:o.node.title.text,description:null==(l=null==(i=null==(n=o.node.subtitle_text)?void 0:n.text)?void 0:i.split("\n"))?void 0:l[1],url:o.node.url,visibility:o.node.node.visibility,image:o.node.image.uri,membersCount:Number(((null==(r=o.node.subtitle_text.text.split("\n"))?void 0:r[0])||"").match(/\d+/g).join("")??1),cursor:o.cursor}}))}var d=(o=>(o.NONE="NONE",o.TOP_LEVEL_GROUP="TOP_LEVEL_GROUP",o))(d||{}),t=(o=>(o.NOT_JOINED="NOT_JOINED",o.PENDING="PENDING",o.MEMBER="MEMBER",o.ADMIN="ADMIN",o))(t||{});function s(o,e="MEMBER"){var n,i,l,r,u,a,d,t,s;return{id:null==(n=null==o?void 0:o.node)?void 0:n.id,name:null==(i=null==o?void 0:o.node)?void 0:i.name,avatar:null==(r=null==(l=null==o?void 0:o.node)?void 0:l.profile_picture)?void 0:r.uri,url:null==(u=null==o?void 0:o.node)?void 0:u.url,lastVisitedTime:1e3*((null==(a=null==o?void 0:o.node)?void 0:a.viewer_last_visited_time)||(null==(d=null==o?void 0:o.node)?void 0:d.viewer_request_to_join_timestamp)||(null==(t=null==o?void 0:o.node)?void 0:t.last_post_time)||0),userType:e,cursor:null==o?void 0:o.cursor,subspaceType:(null==(s=null==o?void 0:o.node)?void 0:s.subspace_type)||"NONE"}}async function _({cursor:i="",ordering:l=["viewer_added"]}={}){var r,u,a,d;if(!i){const n=await o({fb_api_req_friendly_name:"GroupsCometJoinsRootQuery",variables:{ordering:l,scale:2},doc_id:"6985470494844388"}),i=e(n),t=[],{pending_groups:_={},all_joined_groups:p={}}=(null==(r=null==i?void 0:i.data)?void 0:r.viewer)||{};return null==(u=_.edges)||u.forEach((o=>{t.push(s(o,"PENDING"))})),null==(d=null==(a=p.tab_groups_list)?void 0:a.edges)||d.forEach((o=>{t.push(s(o,"MEMBER"))})),console.log(i),t}const t=await o({fb_api_req_friendly_name:"GroupsCometAllJoinedGroupsSectionPaginationQuery",variables:{cursor:i||null,ordering:l,count:20,scale:2},doc_id:"6009728632468556"}),_=e(t);console.log(_);const{edges:p=[],page_info:c={}}=n(_);return p.map((o=>s(o,"MEMBER")))}async function p({cursor:i=""}={}){var l;const r=await o({variables:{adminGroupsCount:1e3,memberGroupsCount:0,scale:1.5},doc_id:"4868264159917793"}),u=e(r);console.log("getMyManagedGroups",u);const{edges:a=[],page_info:d={}}=n(null==(l=null==u?void 0:u.data)?void 0:l.adminGroups);return a.map((o=>s(o,"ADMIN")))}async function c(n=""){var l;const r=await o({fb_api_req_friendly_name:"useGroupLeaveMutation",variables:{input:{group_id:n,readd_policy:"ALLOW_READD",source:"comet_group_page",actor_id:await i(),client_mutation_id:"1"},groupID:n},doc_id:"2018579381571489"}),u=e(r);return console.log(u),null!=(null==(l=null==u?void 0:u.data)?void 0:l.group_leave)}export{r as JoinedGroupType,u as JoinedGroupTypeName,d as SubspaceType,t as UserTypeInGroup,_ as getMyJoinedGroups,p as getMyManagedGroups,a as getOtherJoinedGroups,c as leaveGroup};
