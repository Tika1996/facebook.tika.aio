import{a$ as e,r,b1 as t}from"./index-DZEcYG8Q.js";import{getCacheByKey as o,setCacheByKey as a}from"./useCacheState-D4ghBCVU.js";import{u as n}from"./MyApp-DRRa55Bd.js";import{I as i}from"./index-BE0FsmaM.js";import"./EyeOutlined-BBPXKIU8.js";import"./addEventListener-C9VBchln.js";function s(s){const{cacheId:c,getPreview:l,renderPreview:d,...m}=s,{message:p}=e.useApp(),{ti:f}=n(),u=m.src||"",y="ImageLazyPreview."+(c||u),[g,v]=r.useState(!1),[w,j]=r.useState(o(y,"")),L=w||u;return t.jsx(i,{...m,preview:"function"==typeof d?d(L,g):{src:L},onClick:e=>{var r;null==(r=m.onClick)||r.call(m,e),(async()=>{if(!w)try{v(!0),p.loading({duration:0,key:y,content:f({en:"Loading...",vi:"Đang tải..."})});let e=performance.now();const r=await l();let t=performance.now();console.log("getPreview",t-e),r&&r!==u&&(j(r),a(y,r)),p.destroy(y)}catch(e){console.error(e),p.error({key:y,content:f({en:"Load failed: ",vi:"Load lỗi: "})+e.message})}finally{v(!1)}})()}})}export{s as default};
