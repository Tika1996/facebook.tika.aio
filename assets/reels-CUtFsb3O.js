const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./videos-DtjqJObU.js","./___vite-browser-external_commonjs-proxy-D5wFEbJ4.js","./index-DZEcYG8Q.js","./index-C6k8ZUm0.css","./MyApp-DRRa55Bd.js"])))=>i.map(i=>d[i]);
import{aY as e}from"./index-DZEcYG8Q.js";import{aA as o,y as i,x as l,az as n,X as d}from"./MyApp-DRRa55Bd.js";async function r({id:n="",cursor:d=""}){var r,_,t;const a=await o(n,"owner_reels"),s=await i({fb_api_req_friendly_name:"ProfileCometAppCollectionReelsRendererPaginationQuery",variables:{count:10,cursor:d,feedLocation:"COMET_MEDIA_VIEWER",feedbackSource:65,focusCommentID:null,renderLocation:null,scale:1,useDefaultActor:!0,id:a},doc_id:"7821270511254925"}),u=l((null==(r=null==s?void 0:s.split("\n"))?void 0:r[0])||"{}");console.log(u);const{edges:v=[],page_info:c={}}=(null==(t=null==(_=null==u?void 0:u.data)?void 0:_.node)?void 0:t.aggregated_fb_shorts)||{},{extractVideoInfo:p}=await e((async()=>{const{extractVideoInfo:e}=await import("./videos-DtjqJObU.js");return{extractVideoInfo:e}}),__vite__mapDeps([0,1,2,3,4]),import.meta.url);return v.map((e=>{var o,i,l,n,d,r,_,t,a,s,u,v;const f=(null==(i=null==(o=null==e?void 0:e.profile_reel_node)?void 0:o.node)?void 0:i.short_form_video_context)||{};return{...p(null==f?void 0:f.playback_video),id:(null==(d=null==(n=null==(l=null==e?void 0:e.profile_reel_node)?void 0:l.node)?void 0:n.video)?void 0:d.id)||atob(null==(r=null==e?void 0:e.profile_reel_node)?void 0:r.id).split(":").pop(),description:null==(a=null==(t=null==(_=null==e?void 0:e.profile_reel_node)?void 0:_.node)?void 0:t.message)?void 0:a.text,viewCount:null==f?void 0:f.play_count_reduced,created_time:1e3*((null==(u=null==(s=null==e?void 0:e.profile_reel_node)?void 0:s.node)?void 0:u.creation_time)||0)+"",url:null==f?void 0:f.shareable_url,cursor:(null==e?void 0:e.cursor)||c.end_cursor,music:null==f?void 0:f.track_title,length:null==(v=null==f?void 0:f.playback_video)?void 0:v.length_in_second}}))}async function _({page_id:o="",group_id_list:r=[],root_video_id:_="",cursor:t=""}){const a=t?await i({fb_api_req_friendly_name:"FBReelsContainerQuery",variables:{count:5,cursor:t,feedLocation:"COMET_MEDIA_VIEWER",feedbackSource:65,focusCommentID:null,group_id_list:r,recent_vpvs_v2:[],referral_source:"fb_shorts_bookmark",renderLocation:"fb_shorts_video_deep_dive",root_video_id:_||null,scale:2,surface_type:"FEED_VIDEO_DEEP_DIVE",useDefaultActor:!1,__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:!1,__relay_internal__pv__IsWorkUserrelayprovider:!1},doc_id:"9277146635647891"}):await i({fb_api_req_friendly_name:"FBReelsRootWithEntrypointQuery",variables:{count:1,defer_comments_loading:!1,feedbackSource:65,feedLocation:"COMET_MEDIA_VIEWER",focusCommentID:null,group_id_list:r,initial_node_id:"",isAggregationProfileViewerOrShouldShowReelsForPage:!1,page_id:o,recent_vpvs_v2:[],referral_source:"fb_shorts_bookmark",renderLocation:"fb_shorts_video_deep_dive",root_video_id:_||null,root_video_tracking_key:"",scale:2,shouldIncludeInitialNodeFetch:!1,shouldShowReelsForPage:!1,surface_type:"FEED_VIDEO_DEEP_DIVE",__relay_internal__pv__FBReelsMediaFooter_comet_enable_reels_ads_gkrelayprovider:!1,__relay_internal__pv__IsWorkUserrelayprovider:!1},doc_id:"27470664929247812"}),s=l(a,[],!0),{edges:u=[],page_info:v}=n(s[0]),c=d(s,"all_video_dash_prefetch_representations",!1)||[],{extractVideoVariants:p}=await e((async()=>{const{extractVideoVariants:e}=await import("./videos-DtjqJObU.js");return{extractVideoVariants:e}}),__vite__mapDeps([0,1,2,3,4]),import.meta.url);return u.map((e=>{var o,i,l,n,d,r,_,t,a,s,u,f,y,m,g,h,b,w,E,k,D,I,R,V,x,F,S,A,C,M,O,P,L,q,j;const W=null==(o=null==e?void 0:e.node)?void 0:o.short_form_video_context,B=null==(i=null==W?void 0:W.video)?void 0:i.id,T=["browser_native_hd_url","browser_native_sd_url"].map((e=>{var o,i;return null==(i=null==(o=null==W?void 0:W.playback_video)?void 0:o.videoDeliveryLegacyFields)?void 0:i[e]})).find((e=>!!e)),Q=null==(n=null==(l=["HD","SD"].map((e=>{var o,i,l,n;return null==(n=null==(l=null==(i=null==(o=null==W?void 0:W.playback_video)?void 0:o.videoDeliveryResponseFragment)?void 0:i.videoDeliveryResponseResult)?void 0:l.progressive_urls)?void 0:n.find((o=>{var i;return(null==(i=null==o?void 0:o.metadata)?void 0:i.quality)===e}))})))?void 0:l.find((e=>!!e.progressive_url)))?void 0:n.progressive_url,U=c.find((e=>e.video_id===B)),N=null==(_=null==(r=null==(d=null==U?void 0:U.representations)?void 0:d.sort(((e,o)=>e.bandwidth-o.bandwidth)))?void 0:r[0])?void 0:_.base_url;return{id:null==e?void 0:e.id,caption:null==(a=null==(t=null==e?void 0:e.node)?void 0:t.message)?void 0:a.text,translated_caption:null==(u=null==(s=null==e?void 0:e.node)?void 0:s.translated_message_for_viewer)?void 0:u.text,post_id:null==(f=null==e?void 0:e.node)?void 0:f.post_id,sound:{id:null==(y=null==W?void 0:W.soundtrack_info)?void 0:y.id,title:null==W?void 0:W.track_title},owner:{id:null==(m=null==W?void 0:W.video_owner)?void 0:m.id,avatar:null==(h=null==(g=null==W?void 0:W.video_owner)?void 0:g.displayPicture)?void 0:h.uri,name:null==(b=null==W?void 0:W.video_owner)?void 0:b.name,url:null==(w=null==W?void 0:W.video_owner)?void 0:w.url,ig_username:"InstagramUserV2"==(null==(E=null==W?void 0:W.video_owner)?void 0:E.__isActor)?null==(k=null==W?void 0:W.video_owner)?void 0:k.username:""},video:{id:B,owner:null==(D=null==W?void 0:W.video_owner)?void 0:D.id,length:(null==(I=null==W?void 0:W.video)?void 0:I.playable_duration_in_ms)||1e3*((null==(R=null==W?void 0:W.playback_video)?void 0:R.length_in_second)||0),url:null==W?void 0:W.shareable_url,width:null==(V=null==W?void 0:W.playback_video)?void 0:V.width,height:null==(x=null==W?void 0:W.playback_video)?void 0:x.height,source:T||Q||N,created_time:1e3*((null==(F=null==e?void 0:e.node)?void 0:F.creation_time)||0)+"",thumbnail:null==(S=null==W?void 0:W.video)?void 0:S.first_frame_thumbnail,variants:p((null==(C=null==(A=null==W?void 0:W.playback_video)?void 0:A.videoDeliveryLegacyFields)?void 0:C.dash_manifest_xml_string)||(null==(q=null==(L=null==(P=null==(O=null==(M=null==W?void 0:W.playback_video)?void 0:M.videoDeliveryResponseFragment)?void 0:O.videoDeliveryResponseResult)?void 0:P.dash_manifests)?void 0:L[0])?void 0:q.manifest_xml)),quality:null==(j=null==W?void 0:W.playback_video)?void 0:j.min_quality_preference},cursor:(null==e?void 0:e.cursor)||(null==v?void 0:v.end_cursor)}}))}JSON.stringify({qid:"-909642526462335516",mf_story_key:"1169687781834225",top_level_post_id:"1169687781834225",content_owner_id_new:"100063790413558",page_id:"105709027913953",story_location:153,story_attachment_style:"fb_shorts_creation",video_id:"1735896850598697",sty:128,mf_objid:"1169687781834225",ent_attachement_type:"FBShortsStoryAttachment",app_id:"2392950137",page_insights:{100063790413558:{page_id:"100063790413558",page_id_type:"page",actor_id:"100063790413558",dm:{isShare:0,originalPostOwnerID:0,sharedMediaID:0,sharedMediaOwnerID:0},psn:"EntStatusCreationStory",post_context:{object_fbtype:266,publish_time:1731474065,story_name:"EntStatusCreationStory",story_fbid:["1169687781834225"]},role:1,sl:153,targets:[{actor_id:"100063790413558",page_id:"100063790413558",post_id:"1169687781834225",role:1,share_id:0}]}},actrs:"100063790413558",fb_shorts_tray_mf_story_key:"-2242439210195115141",fb_shorts_tray_query_id:"-909642526489079076",fb_shorts_ifu_tray_index:1,fb_shorts_ifu_tray_position:12,fb_shorts_ranking_request_id:"-909710971046028682",tds_flgs:3});export{_ as getReelsFeed,r as getUserReels};
