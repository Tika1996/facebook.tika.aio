import{y as n,x as o,az as e,h as i,W as l,X as r,aA as t,i as a}from"./MyApp-DRRa55Bd.js";import{a as d}from"./gender-D7cqwEK5.js";import"./index-DZEcYG8Q.js";async function u({myUid:l,targetUid:r=""}){const t=await n({doc_id:"4936483286421335",variables:{id:r||l,query:"",scale:1}});try{const n=o(t||"{}"),{edges:l=[]}=e(n,!1);return l.map((n=>{var o,e,l,r,t,a;return{uid:null==(o=n.node)?void 0:o.id,url:(null==(e=n.node)?void 0:e.url)||i(null==(l=n.node)?void 0:l.id),name:null==(r=n.node)?void 0:r.name,avatar:null==(a=null==(t=n.node)?void 0:t.photo)?void 0:a.uri}}))}catch(a){return[]}}async function s({myUid:e="",targetUid:i}){var r;const t=await n({doc_id:"8752443744796374",variables:{input:{source:"friending_jewel",unfriended_user_id:i,actor_id:e||await l()},scale:1}}),a=o(t||"{}");if(null==(r=a.errors)?void 0:r.length)throw new Error(a.errors[0].message);return a}async function c({myUid:e=null,targetUid:i}){var r;const t=await n({doc_id:"6294978773852692",variables:{input:{attribution_id_v2:"FriendingCometRoot.react,comet.friending,tap_tabbar,1667288605315,127814,2356318349,",friend_requestee_ids:[i],people_you_may_know_location:"friends_center",refs:[null],source:"people_you_may_know",warn_ack_for_ids:[],actor_id:e||await l()},scale:2}}),a=o(t);if(null==(r=a.errors)?void 0:r.length)throw new Error(a.errors[0].message);return a}async function v({myUid:e=null,targetUid:i}){var r,t,a,d,u,s,c;const v=await n({doc_id:"5028133957233114",variables:{input:{actor_id:e||await l(),user_id:i}}}),_=o(v||"{}");if(null==(r=_.errors)?void 0:r.length)throw new Error(_.errors[0].message);if("PENDING"!=(null==(d=null==(a=null==(t=null==_?void 0:_.data)?void 0:t.user_poke)?void 0:a.user)?void 0:d.poke_status))throw new Error("Failed to poke friend: "+(null==(c=null==(s=null==(u=null==_?void 0:_.data)?void 0:u.user_poke)?void 0:s.user)?void 0:c.poke_status));return _}var _=(n=>(n.NameContainsSpecialCharacters="Name contains special characters",n.NameContainsNumbers="Name contains numbers",n.StrangeUid="Strange uid",n.NoAvatar="No avatar",n.Locked="Locked",n.BlockedMessages="Blocked messages",n.CurrentCity="Current city",n.Hometown="Hometown",n.Highschool="Highschool",n.Work="Work",n.Following="Following",n.Follower="Follower",n))(_||{});const m={"Name contains special characters":{en:"👽 Special characters",vi:"👽 Ký tự đặc biệt",color:"orange"},"Name contains numbers":{en:"🔟 Contains numbers",vi:"🔟 Chứa số",color:"purple"},"No avatar":{en:"👤 No avatar",vi:"👤 Không ảnh đại diện",color:"cyan"},"Strange uid":{en:"🆔 Strange UID",vi:"🆔 UID lạ",color:"blue"},Locked:{en:"🔒 Locked",vi:"🔒 Bị khoá",color:"red"},"Blocked messages":{en:"🚫 Blocked messages",vi:"🚫 Chặn tin nhắn",color:"red"},"Current city":{en:"🏙️ Current city",vi:"🏙️ Cùng tỉnh thành",color:"green"},Hometown:{en:"🏡 Hometown",vi:"🏡 Cùng quê",color:"green"},Highschool:{en:"📚 High school",vi:"📚 Cùng trung học",color:"green"},Work:{en:"💼 Work",vi:"💼 Cùng công ty",color:"green"},Following:{en:"👉 Following",vi:"👉 Đang theo dõi",color:"green"},Follower:{en:"👥 Follower",vi:"👥 Người theo dõi",color:"green"}};var g=(n=>(n.friends="friends_all",n.recent_added="friends_recent",n.birthdays="friends_with_upcoming_birthdays",n.works="friends_work",n.high_school="friends_high_school",n.current_city="friends_current_city",n.hometown="friends_hometown",n.followers="followers",n.following="following",n))(g||{});async function y({uid:i=null,cursor:r=null,section:a="friends_all"}){const u=await t(i||await l(),a);let s=await n({doc_id:"4186250744800382",variables:{count:8,cursor:r,scale:2,id:u}});const c=o(s),{edges:v=[],page_info:_={}}=e(c)||{};return console.log(v),v.map((n=>{var o,e,i,l,r,t,a,u,s,c,v,m,g,y,f,h,p,w,b,k;let C=null==(e=null==(o=null==n?void 0:n.node)?void 0:o.node)?void 0:e.id;if(!/^\d+$/.exec(C))try{let n=atob(C);C=(null==(i=/\d+/.exec(n))?void 0:i[0])||C}catch(N){console.log(N)}return{uid:C,name:null==(r=null==(l=null==n?void 0:n.node)?void 0:l.title)?void 0:r.text,avatar:null==(a=null==(t=null==n?void 0:n.node)?void 0:t.image)?void 0:a.uri,url:null==(u=null==n?void 0:n.node)?void 0:u.url,mutualFriendCount:(null==(m=null==(v=null==(c=null==(s=null==n?void 0:n.node)?void 0:s.subtitle_text)?void 0:c.aggregated_ranges)?void 0:v[0])?void 0:m.count)||0,gender:(null==(w=null==(p=null==(h=null==(f=null==(y=null==(g=null==n?void 0:n.node)?void 0:g.actions_renderer)?void 0:y.action)?void 0:f.client_handler)?void 0:h.profile_action)?void 0:p.restrictable_profile_owner)?void 0:w.gender)||d.UNKNOWN,isLocked:!(null==(b=null==n?void 0:n.node)?void 0:b.subtitle_text)||!(null==(k=null==n?void 0:n.node)?void 0:k.url),cursor:(null==n?void 0:n.cursor)||(null==_?void 0:_.end_cursor)}}))}async function f(e=100){var i,l;const t=await n({fb_api_req_friendly_name:"CometHomeContactsContainerQuery",variables:{numContactsToFetch:e,scale:2,__relay_internal__pv__CometHomeContactListItemsContactListAnRankingIsEnabledrelayprovider:!0},doc_id:"8845828445504279"}),[a,d]=(null==(i=null==t?void 0:t.split)?void 0:i.call(t,"\n"))||[];console.log(t);const u=o(a),s=[];for(let n of r(u,"chat_sidebar_contacts")||[])s.push({uid:n.id,name:n.name,avatar:null==(l=n.profile_picture)?void 0:l.uri});return s}function h(n,o,e=!1){var i,l,r,t,d,u,s,c,v;const _=e?0:1,m=(null==(t=null==(r=null==(l=null==(i=null==n?void 0:n.node)?void 0:i.summary)?void 0:l.ranges)?void 0:r[_])?void 0:t.entity)||{},g=(null==m?void 0:m.id)||(null==(d=null==n?void 0:n.node)?void 0:d.post_id),y=(null==n?void 0:n.cursor)||(null==o?void 0:o.cursor);return{uid:g,name:null==m?void 0:m.short_name,desc:null==(s=null==(u=null==n?void 0:n.node)?void 0:u.summary)?void 0:s.text,url:(null==m?void 0:m.url)||(null==m?void 0:m.profile_url)||(null==m?void 0:m.mobileUrl),avatar:a(g,100),time:1e3*parseInt((null==(c=null==n?void 0:n.node)?void 0:c.creation_time)||(null==(v=null==y?void 0:y.split(":"))?void 0:v[0])||0),cursor:y}}async function p(i=""){const r=await n({fb_api_req_friendly_name:"CometActivityLogStoriesListPaginationQuery",variables:{audience:null,category:"REMOVEDFRIENDS",category_key:"REMOVEDFRIENDS",count:25,cursor:i,feedLocation:null,media_content_filters:[],month:null,person_id:null,privacy:"NONE",scale:2,timeline_visibility:"ALL",year:null,id:await l()},doc_id:"27684299287850969"}),t=o(r);console.log(t);const{edges:a=[],page_info:d={}}=e(t);return a.map((n=>h(n,d)))}async function w(i=""){const r=await n({fb_api_req_friendly_name:"CometActivityLogStoriesListPaginationQuery",variables:{audience:null,category:"FRIENDS",category_key:"FRIENDS",count:25,cursor:i,feedLocation:null,media_content_filters:[],month:null,person_id:null,privacy:"NONE",scale:2,timeline_visibility:"ALL",year:null,id:await l()},doc_id:"27684299287850969"}),t=o(r),{edges:a=[],page_info:d={}}=e(t);return a.map((n=>h(n,d)))}async function b(i="1"){const l=await n({fb_api_req_friendly_name:"BirthdayCometMonthlyBirthdaysRefetchQuery",variables:{count:2,cursor:i,offset_month:0,scale:2,stream_birthday_months:!1},doc_id:"27478190941824257"}),r=o(l),{edges:t=[],page_info:a={}}=e(r);return t.map((n=>{var o,e;const i=(null==(e=null==(o=null==n?void 0:n.node)?void 0:o.friends)?void 0:e.edges)||[];return null==i?void 0:i.map((n=>{var o,e,i,l,r,t,d,u,s,c,v,_;return{uid:null==(o=null==n?void 0:n.node)?void 0:o.id,name:null==(e=null==n?void 0:n.node)?void 0:e.name,url:(null==(i=null==n?void 0:n.node)?void 0:i.profile_url)||(null==(l=null==n?void 0:n.node)?void 0:l.url),avatar:null==(t=null==(r=null==n?void 0:n.node)?void 0:r.profile_picture)?void 0:t.uri,birthday:{day:null==(u=null==(d=null==n?void 0:n.node)?void 0:d.birthdate)?void 0:u.day,month:null==(c=null==(s=null==n?void 0:n.node)?void 0:s.birthdate)?void 0:c.month,year:null==(_=null==(v=null==n?void 0:n.node)?void 0:v.birthdate)?void 0:_.year},cursor:null==a?void 0:a.end_cursor}}))})).flat()}async function k(i=""){const r=await n({fb_api_req_friendly_name:"CometActivityLogStoriesListPaginationQuery",variables:{audience:null,category:"FOLLOWERS",category_key:"FOLLOWERS",count:25,cursor:i,feedLocation:null,media_content_filters:[],month:null,person_id:null,privacy:"NONE",scale:2,timeline_visibility:"ALL",year:null,id:await l()},doc_id:"7782012195256824"}),t=o(r),{edges:a=[],page_info:d={}}=e(t);return a.map((n=>h(n,d,!0)))}export{g as FriendSection,m as QuickFilterLang,_ as QuickFilterType,c as addFriend,f as findBuddy,w as getAddFriendTime,u as getAllFriends,k as getFollowers,b as getFriendBirthdays,y as getProfileFriendsSection,p as getUnfriended,v as pokeFriend,s as unfriend};
