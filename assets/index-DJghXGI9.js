import{r as e,b1 as i,b5 as s}from"./index-DZEcYG8Q.js";import{S as n}from"./Screen-1_H4V3tg.js";import t from"./useCacheState-D4ghBCVU.js";import{u as o,d as r,aS as l,A as a,T as c,S as d,ah as m}from"./MyApp-DRRa55Bd.js";import{getAvailableProfileSections as h,setProfileSectionEnabled as p}from"./profileSection-BNXt6RZ7.js";import{C as j}from"./index-B2BHea4N.js";import{L as f}from"./index-CG5dclLJ.js";import{a as u}from"./index-BQAhaSn9.js";import"./col-DLTiGXF3.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./index-CiDxWY8X.js";import"./Dropdown-BgvXKd3u.js";import"./index-D9U4WvIE.js";import"./List-BPJoeCz4.js";import"./PurePanel-Beni9Vkb.js";import"./index-CvALG2oX.js";import"./move-Bzyc79vL.js";import"./DownOutlined-BrkIPj-I.js";import"./SearchOutlined-Bh66KhXc.js";import"./Pagination-Dv2YSLQ3.js";import"./index-CEGXIRel.js";function x(){const{ti:x}=o(),{message:g}=r(),[v,S]=t("ProfileSections.sections",[]),[b,y]=t("ProfileSections.selectedSections",[]),[k,w]=e.useState(!1),[C,P]=e.useState(!1),L=e.useMemo((()=>{const e=new Set(v.filter((e=>e.is_visible)).map((e=>e.id))),i=new Set(b);return!l(e,i)}),[v,b]);e.useEffect((()=>{(null==v?void 0:v.length)||_()}),[]);const _=()=>{w(!0),h().then((e=>{S(e),y(e.filter((e=>e.is_visible)).map((e=>e.id)))})).catch((e=>{console.error(e),g.error(x({en:"Failed to load profile sections",vi:"Lỗi khi tải các phần trên trang cá nhân"})+": "+e.message)})).finally((()=>w(!1)))};return i.jsxs(n,{mode:"center",title:x({en:"Hide profile sections",vi:"Ẩn trang cá nhân"}),children:[i.jsx(a,{type:"info",showIcon:!0,message:x({en:"Uncheck to hide sections from your Profile.",vi:"Hãy bỏ chọn để ẩn các phần khỏi Trang cá nhân của bạn."}),style:{marginBottom:16}}),(null==v?void 0:v.length)>0?i.jsx(j,{title:i.jsxs(d,{align:"center",style:{width:"100%",justifyContent:"center"},children:[i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-rotate-right"}),onClick:_,loading:k,children:x({en:"Reload",vi:"Tải lại"})}),i.jsx(s,{icon:i.jsx("i",{className:"fa-solid fa-save"}),onClick:()=>{P(!0),p(b).then((e=>{g.success(x({en:"Saved",vi:"Đã lưu"})),(null==e?void 0:e.length)&&S(e),_()})).catch((e=>{console.error(e),g.error(x({en:"Failed to save profile sections",vi:"Lỗi khi lưu các phần trên trang cá nhân"})+": "+e.message)})).finally((()=>P(!1)))},disabled:k||!L,loading:C,children:x({en:"Save",vi:"Lưu"})})]}),children:i.jsx(f,{bordered:!1,split:!1,dataSource:v,size:"small",renderItem:e=>i.jsx(f.Item,{children:i.jsx(c,{placement:"left",title:e.is_hideable?"":x({en:"Not hideable",vi:"Không ẩn được"}),children:i.jsx(u,{disabled:!e.is_hideable,checked:b.includes(e.id),onChange:()=>{y((i=>i.includes(e.id)?i.filter((i=>i!==e.id)):[...i,e.id]))},children:e.name})})})})}):k?i.jsx(m,{}):null]})}export{x as default};
