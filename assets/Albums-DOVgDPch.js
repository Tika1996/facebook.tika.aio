import{r as e,b1 as i,b5 as t}from"./index-DZEcYG8Q.js";import{u as s,d as n,z as o,S as a,B as r,g as l,h as d,T as m,c,e as u,f as p,A as h,s as j}from"./MyApp-DRRa55Bd.js";import x from"./Collection-DTYRwOd8.js";import{getHiddenAlbums as g,getGroupAlbum as b,getUserAlbum as f}from"./albums-vC5g3Fqf.js";import v from"./useCacheState-D4ghBCVU.js";import{B as w}from"./BadgeWrapper-D8uZ2wKG.js";import{L as y}from"./index-CG5dclLJ.js";import{I as k}from"./index-BE0FsmaM.js";import"./index-BA5m7QhG.js";import"./react-hotkeys-hook.esm-D8zm19cE.js";import"./index-C0Edlh-n.js";import"./index-BQAhaSn9.js";import"./index-CEGXIRel.js";import"./index-KPoWFIyW.js";import"./dropdown-BoVCRztz.js";import"./Dropdown-BgvXKd3u.js";import"./PurePanel-Beni9Vkb.js";import"./move-Bzyc79vL.js";import"./index-B87p3I4c.js";import"./Input-LTpJ6AuY.js";import"./EyeOutlined-BBPXKIU8.js";import"./SearchOutlined-Bh66KhXc.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./index-DHhmxYJT.js";import"./index-D9U4WvIE.js";import"./List-BPJoeCz4.js";import"./index-CvALG2oX.js";import"./DownOutlined-BrkIPj-I.js";import"./Pagination-Dv2YSLQ3.js";import"./col-DLTiGXF3.js";import"./addEventListener-C9VBchln.js";function T({target:T,onOpenAlbum:C}){const{ti:_}=s(),{message:N}=n(),[S,I]=v("hiddenAlbums_"+(null==T?void 0:T.id),[]),[$,B]=e.useState(!1),D=e.useCallback((async()=>{if(!(null==T?void 0:T.id)||!(null==T?void 0:T.type))return;B(!0);const e=await g(T.id);console.log(e),e?(N.success(_({en:`Found ${e.length} hidden albums`,vi:`Tìm thấy ${e.length} album ẩn`})),I(e)):N.error(_({en:"No hidden albums found",vi:"Không tìm thấy album ẩn nào"})),B(!1)}),[T,C]),P=e.useCallback((async(e=[])=>{var i,t;if(!(null==T?void 0:T.id)||!(null==T?void 0:T.type))return;const s=null==(i=null==e?void 0:e[(null==e?void 0:e.length)-1])?void 0:i.cursor,n=T.type===o.Group?await b({groupId:T.id,cursor:s}):await f({uid:T.id,cursor:s});if(null==(t=n.albums)?void 0:t.length){let i=new Set(e.map((e=>e.id)));return n.albums.filter((e=>!i.has(e.id)))}return[]}),[T]),A=e.useCallback((e=>i.jsx(y.Item,{children:i.jsxs(a,{direction:"vertical",children:[i.jsx(r.Ribbon,{text:l(e.count),children:i.jsxs("div",{className:"show-on-hover-trigger",children:[i.jsx(k,{src:e.picture,alt:e.name,width:150,height:150,fallback:"https://placehold.co/150x150",style:{objectFit:"cover",borderRadius:"10px",cursor:"pointer"},preview:!1,onClick:()=>{null==C||C(e)}}),i.jsx(t,{type:"default",icon:i.jsx("i",{className:"fa-solid fa-up-right-from-square"}),style:{position:"absolute",bottom:5,right:5},className:"show-on-hover-item",target:"_blank",href:d(e.id)}),(e.created_time||e.updated_time)&&i.jsxs(a,{direction:"vertical",style:{position:"absolute",bottom:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",padding:5,borderTopRightRadius:10},children:[e.created_time&&i.jsx(m,{title:_({en:"Created at ",vi:"Tạo lúc "})+p(new Date(e.created_time).getTime(),{showTime:!0}),children:i.jsxs(c.Text,{children:[i.jsx("i",{className:"fa-solid fa-plus"})," ",u(new Date(e.created_time).getTime())]})}),e.updated_time&&i.jsx(m,{title:_({en:"Last updated at ",vi:"Cập nhật lần cuối lúc "})+p(new Date(e.updated_time).getTime(),{showTime:!0}),children:i.jsxs(c.Text,{children:[i.jsx("i",{className:"fa-solid fa-pen-to-square"})," ",u(new Date(e.updated_time).getTime())]})})]})]})}),i.jsx(c.Paragraph,{style:{maxWidth:"150px",wordWrap:"break-word"},onClick:()=>window.open(e.link),children:e.name})]})},e.id)),[]),F=e.useCallback((()=>i.jsxs(a,{direction:"vertical",align:"center",children:[(null==S?void 0:S.length)>0&&i.jsxs(a,{direction:"vertical",align:"center",children:[i.jsxs(c.Title,{level:4,children:[_({en:`Found ${S.length} hidden albums`,vi:`Tìm thấy ${S.length} album ẩn`}),":"]}),i.jsx(a,{wrap:!0,align:"start",style:{justifyContent:"center"},children:S.map(A)})]}),i.jsx(h,{showIcon:!0,type:"info",message:_({en:"Click any album to view photos",vi:"Click album bất kỳ để xem ảnh"})})]})),[_,S,A]);return i.jsx(x,{collectionName:(null==T?void 0:T.name)+" - Albums",fetchNext:P,renderItem:A,rowKey:e=>e.id,header:F,searchPlaceholder:e=>_({en:`Search in ${null==e?void 0:e.length} albums...`,vi:`Tìm trong ${e.length} albums...`}),onSearch:(e,i)=>j(e,i.name),headerButtons:e=>(null==T?void 0:T.type)===o.Group?null:i.jsx(w,{type:"new",children:i.jsx(m,{title:i.jsxs(i.Fragment,{children:[_({en:"Including wall album, mobile album, ...",vi:"Bao gồm album Ảnh trên dòng thời gian, Tải lên từ di động, ..."}),i.jsx(t,{type:"link",href:"https://www.facebook.com/groups/fbaio/posts/1668900333764648",target:"_blank",icon:i.jsx("i",{className:"fa-solid fa-up-right-from-square"}),iconPosition:"end",children:_({en:"See more",vi:"Xem thêm"})})]}),children:i.jsx(t,{icon:i.jsx("i",{className:"fa-solid fa-eye-slash"}),onClick:D,loading:$,children:_({en:"Find hidden albums",vi:"Tìm album ẩn"})})})})})}export{T as default};
