import{r as e,b1 as t}from"./index-DZEcYG8Q.js";import{C as r,a as i,b as n}from"./index-SIgeSDyW.js";import{u as o,s,S as c,T as a}from"./MyApp-DRRa55Bd.js";import{u as l}from"./index-BA5m7QhG.js";import d from"./useCacheState-D4ghBCVU.js";import{I as h}from"./index-B87p3I4c.js";import{T as p}from"./index-BRk8JeT5.js";import"./Screen-1_H4V3tg.js";import"./col-DLTiGXF3.js";import"./row-BgRGnxnv.js";import"./useBreakpoint-HjQEkdEA.js";import"./MyTable-D1FbPMwN.js";import"./index-DOt91uSA.js";import"./DownOutlined-BrkIPj-I.js";import"./Table-DDck-vB7.js";import"./addEventListener-C9VBchln.js";import"./List-BPJoeCz4.js";import"./index-BQAhaSn9.js";import"./index-CEGXIRel.js";import"./index-KPoWFIyW.js";import"./dropdown-BoVCRztz.js";import"./Dropdown-BgvXKd3u.js";import"./PurePanel-Beni9Vkb.js";import"./move-Bzyc79vL.js";import"./index-D9U4WvIE.js";import"./index-CvALG2oX.js";import"./SearchOutlined-Bh66KhXc.js";import"./Pagination-Dv2YSLQ3.js";import"./Input-LTpJ6AuY.js";import"./EyeOutlined-BBPXKIU8.js";import"./ExportButton-CPuYvz9B.js";import"./useVIP-CGpIDALh.js";import"./sweetalert2.esm.all-BZxvatOx.js";import"./getIds-BE6G2xp0.js";import"./index-CiDxWY8X.js";import"./index-BE0FsmaM.js";import"./index-B2BHea4N.js";import"./index-iP3EwXx5.js";function m({onCategorySelect:c,initialCheckedKeys:a}){const{ti:m,language:u}=o(),[f,g]=d("CategoryTree:searchValue",""),[k,b]=d("CategoryTree:expandedKeys",[r.ALL]),[w,C]=d("CategoryTree:autoExpandParent",!0),[v,T]=d("CategoryTree:checkedKeys",a||[]),E=e.useMemo((()=>{const e=x(i,m);if(!f)return e;const r=e=>e.map((e=>{const i={...e};if("string"==typeof e.title){const r=s(f,e.title);i.title=r?t.jsx("span",{style:j,children:e.title}):e.title}return e.children&&e.children.length>0&&(i.children=r(e.children)),i}));return r(e)}),[u,f]),O=(e,t)=>{const{node:i,checked:n}=t;if(!n)return c(null),void T([]);const o=i.key;if(o&&o in r){const e=[];e.push(o),c(o);const t=y(i.children);e.push(...t),T(e)}},S=l((e=>{if(g(e),!e)return b([]),void C(!1);const t=[],r=(i,o=[])=>{i.forEach((i=>{const c=n[i.key]||i.key;s(e,m(c))&&t.push(...o),i.children&&i.children.length>0&&r(i.children,[...o,i.key])}))};r(E),b([...new Set(t)]),C(!0)}),500);return t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx(h.Search,{style:{marginBottom:8},placeholder:m({en:"Search categories",vi:"Tìm kiếm danh mục"}),onChange:e=>S(e.target.value),allowClear:!0}),t.jsx(p.DirectoryTree,{showIcon:!0,style:{width:"100%"},className:"custom-directory-tree",checkedKeys:v,expandedKeys:k,autoExpandParent:w,onCheck:O,onSelect:(e,t)=>{t.node.hasChildren||O(0,{node:t.node,checked:!t.node.checked})},onExpand:e=>{b(e),C(!1)},treeData:E,filterTreeNode:e=>!f||s(f,e.title),showLine:{showLeafIcon:!1},switcherIcon:e=>t.jsx("i",{className:e.expanded?"fa-solid fa-chevron-down":"fa-solid fa-chevron-right"}),checkable:!0})]})}const j={backgroundColor:"#ffd591",padding:"0 4px",borderRadius:"2px",color:"#000"},u=e=>{var t;return(null==(t=n[e])?void 0:t.icon)||"fa-solid fa-folder"},x=(e,t)=>{if(!e)return[];const r=[];return e.children&&Object.entries(e.children).forEach((([e,i])=>{const n=f(i,e,t);n&&r.push(n)})),r},f=(e,i,o)=>{var s;const l=Object.hasOwn(r,i),d=o(e.name||n[i]||i),h=l,p={title:t.jsxs(c,{children:[d,e.tooltip&&t.jsx(a,{title:o(e.tooltip),placement:"right",children:t.jsx("i",{className:"fa-solid fa-circle-info"})})]}),key:i,selectable:h,checkable:h,children:[],icon:t.jsx("i",{className:(null==(s=e.name)?void 0:s.icon)||u(i)}),hasChildren:e.children&&Object.keys(e.children).length>0};return e.children&&Object.keys(e.children).length>0&&Object.entries(e.children).forEach((([e,t])=>{const r=f(t,e,o);r&&p.children.push(r)})),0!==p.children.length||l||"children"===i?p:null},y=e=>{let t=[];return e.forEach((e=>{e.children&&e.children.length>0?t=[...t,...y(e.children)]:e.checkable&&t.push(e.key)})),t};export{m as default};
